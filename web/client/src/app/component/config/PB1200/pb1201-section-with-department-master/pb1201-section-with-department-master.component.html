<div [formGroup]="myFormGroup">
  <section class="contentsButton">

    <div class="contentsButton__inner">

      <!--- 処理結果の表示 -->
      <app-parts-result-message [processCustomResult]="processCustomResult"></app-parts-result-message>

      <button
        (click)="buttonAction(BUTTON_ACTION.REGISTRY)"
        [ngClass]="{'button-disable': myFormGroup.invalid}"
        class="buttonSecondary">{{ItemNameConst.BTN_REGISTRY}}</button>
      <button
        (click)="clear();processResultService.clearProcessCustomMsg(processCustomResult)"
        class="buttonMinimum">{{ItemNameConst.BTN_CLEAR}}</button>
        
      <div class="contentsButton__subSection">
        <ng-container *ngIf="securityHideShow">
          <ng-container *ngIf="userInfoService.isFunctionAvailable(FunctionType.MasterImport)">
            <button class="buttonImport infotip"
              (click)="buttonAction(BUTTON_ACTION.IMPORT)">
              <span [innerHtml]="ButtonTipsConst.CSV_IMPORT | safeHtml_pipe" class="infotip__frame"></span>
            </button>
          </ng-container>
          <ng-container *ngIf="userInfoService.isFunctionAvailable(FunctionType.MasterExport)">
            <button class="buttonExport infotip"
              (click)="buttonAction(BUTTON_ACTION.EXPORT)">
              <span [innerHtml]="ButtonTipsConst.CSV_EXPORT | safeHtml_pipe" class="infotip__frame"></span>
            </button>
          </ng-container>
        </ng-container>
      </div>      

    </div>
  </section>


  <section class="pageContainer">
    <!-- 入力フォーム -->
    <section class="contents">
      <div class="contents__container">
        <dl class="definitionForm">
          <dt class="definitionForm__title">入金部門コード<span class="must_have_icon">{{ItemNameConst.LBL_REQUIRED}}</span></dt>
          <dd class="definitionForm__data">
            <input
              formControlName="sectionCodeCtrl"
              name="sectionCodeCtrl"
              (keyup.enter)="setSectionCode($event.type)"
              (blur)="setSectionCode($event.type)"
              #sectionCodeInput
              [formControl]="sectionCodeCtrl"
              [matAutocomplete]="autoSectionCode"
              maxlength="{{userInfoService.ApplicationControl?.sectionCodeLength}}"
              placeholder="{{PlaceHolderConst.F9_SEARCH}}"
              class="input-size--100"/>
            <mat-autocomplete
              #autoSectionCode="matAutocomplete"
              [panelWidth]="PanelConst.autocompleteWidth300">
              <mat-option
                *ngFor="let section of sectionFilterds[0] | async"
                [value]="section.code">
                {{section.code}}:{{section.name}}
              </mat-option>
            </mat-autocomplete>
            <a class="buttonMasterSearch" (click)="openMasterModal(TABLE_INDEX.MASTER_SECTION)"></a>
          </dd>
          <dt class="definitionForm__title">入金部門名</dt>
          <dd class="definitionForm__data">
            <input
              formControlName="sectionNameCtrl"
              name="sectionNameCtrl"
              class="input-size--400"
              readonly>
          </dd>
        </dl>
      </div>
    </section>

    <!-- 請求部門 -->
    <section class="contents">
      <div class="contents__container">
        <div class="horizontal-container">
          <div class="horizontal-container__box">
            <h3 class="contents__title">{{ItemNameConst.LBL_CHANGE_DEPARTMENT_BEFORE}}</h3>
            <div class="xy-scroller-table__header common-inner-table">
              <table>
                <thead>
                  <tr>
                    <th class="{{TableColumn.COL_50_CODE}}"></th>
                    <th class="{{TableColumn.COL_150_CODE}}">請求部門コード</th>
                    <th class="{{TableColumn.COL_250_CODE}}">請求部門名</th>
                  </tr>
                </thead>
                <tbody class="height--350">
                  <tr
                    class="line-selector"
                    *ngFor="let department of beforeDepartmentsResult?.sectionDepartments; let i = index">
                    <th class="{{TableColumn.COL_50_CENTER_NAME}}">{{ i + 1 }}</th>
                    <td class="{{TableColumn.COL_150_CENTER_NAME}}">{{department.departmentCode}}</td>
                    <td class="{{TableColumn.COL_250_NAME}}">{{department.departmentName}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="horizontal-container__separater">
            <span class="figure--right-arrow"></span>
          </div>
          <div class="horizontal-container__box">
            <h3 class="contents__title">{{ItemNameConst.LBL_CHANGE_DEPARTMENT_AFTER}}</h3>
            <div class="xy-scroller-table__header common-inner-table">
              <table>
                <thead>
                  <tr>
                    <th class="{{TableColumn.COL_50_CODE}}"></th>
                    <th class="{{TableColumn.COL_100_CODE}}"></th>
                    <th class="{{TableColumn.COL_150_CODE}}">請求部門コード</th>
                    <th class="{{TableColumn.COL_250_CODE}}">請求部門名</th>
                  </tr>
                </thead>
                <tbody class="height--350">
                  <tr
                    class="line-selector"
                    *ngFor="let department of afterDepartmentsResult?.sectionDepartments; let i = index"
                    name="afterDepartmentTr">
                    <th class="{{TableColumn.COL_50_CENTER_NAME}}">{{ i + 1 }}</th>
                    <td class="{{TableColumn.COL_100_CENTER_NAME}}">
                      <button
                      (click)="selectDeleteLine(i)"
                      class="buttonMinimum">{{ItemNameConst.BTN_DELETE}}</button>
                    </td>
                    <td class="{{TableColumn.COL_150_CENTER_NAME}}">{{department.departmentCode}}</td>
                    <td class="{{TableColumn.COL_250_NAME}}">{{department.departmentName}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>        
      </div>


      <div class="contents__container">
        <div class="contents__item--w-50 mb--20">
          <dl class="definitionForm">
            <dt class="definitionForm__title w--16">請求部門コード</dt>
            <dd class="definitionForm__data w--84">
              <input
                formControlName="departmentCodeFromCtrl"
                name="departmentCodeFromCtrl"
                (keyup.enter)="setDepartmentCode($event.type, 'from')"
                (blur)="setDepartmentCode($event.type, 'from')"
                #departmentCodeFromInput
                [formControl]="departmentCodeFromCtrl"
                [matAutocomplete]="autoDepartmentCodeFrom"
                maxlength="{{userInfoService.ApplicationControl?.departmentCodeLength}}"
                placeholder="{{PlaceHolderConst.F9_SEARCH}}"
                class="input-size--100 definitionForm__input">
              <mat-autocomplete
                #autoDepartmentCodeFrom="matAutocomplete"
                [panelWidth]="PanelConst.autocompleteWidth300">
                <mat-option
                  *ngFor="let department of departmentFilterds[0] | async"
                  [value]="department.code">
                  {{department.code}}:{{department.name}}
                </mat-option>
              </mat-autocomplete>
              <a class="buttonMasterSearch" (click)="openMasterModal(TABLE_INDEX.MASTER_SECTION_WITH_DEPARTMENT,'from')"></a>
              <input
                formControlName="departmentNameFromCtrl"
                name="departmentNameFromCtrl"
                class="input-size--300"
                readonly>
            </dd>
            <dt class="definitionForm__title w--16">
              <span class="end-checkbox">
                <div class="inputStyled">
                  <input
                    id="cbxDepartmentCtrl"
                    class="inputStyled__input"
                    formControlName="cbxDepartmentCtrl"
                    name="cbxDepartmentCtrl"
                    (change)="setCbxDepartment($event.type)"
                    type="checkbox">
                  <label
                    class="inputStyled__checkbox"
                    for="cbxDepartmentCtrl"></label>
                </div>
              </span>
            </dt>
            <dd class="definitionForm__data w--84">
              <input
                formControlName="departmentCodeToCtrl"
                name="departmentCodeToCtrl"
                (keyup.enter)="setDepartmentCode($event.type, 'to')"
                (blur)="setDepartmentCode($event.type, 'to')"
                #departmentCodeToInput
                [formControl]="departmentCodeToCtrl"
                [matAutocomplete]="autoDepartmentCodeTo"
                maxlength="{{userInfoService.ApplicationControl?.departmentCodeLength}}"
                placeholder="{{PlaceHolderConst.F9_SEARCH}}"
                class="input-size--100 definitionForm__input">
              <mat-autocomplete
                #autoDepartmentCodeTo="matAutocomplete"
                [panelWidth]="PanelConst.autocompleteWidth300">
                <mat-option
                  *ngFor="let department of departmentFilterds[1] | async"
                  [value]="department.code">
                  {{department.code}}:{{department.name}}
                </mat-option>
              </mat-autocomplete>
              <a class="buttonMasterSearch" (click)="openMasterModal(TABLE_INDEX.MASTER_SECTION_WITH_DEPARTMENT,'to')"></a>
              <input
                formControlName="departmentNameToCtrl"
                name="departmentNameToCtrl"
                class="input-size--300"
                readonly>
            </dd>
          </dl>
        </div>
        <div class="contentsButton__inner">
          <button
            (click)="add()"
            [ngClass]="{'button-disable': isAddButton}"
            class="buttonMinimum">{{ItemNameConst.BTN_ADD}}</button>
          <button
            (click)="allDelete()"
            [ngClass]="{'button-disable': UpdateButtonDisableFlag}"
            class="buttonMinimum">{{ItemNameConst.BTN_BULK_DELETE}}</button>
        </div>
      </div>
    </section>

  </section>
    
</div>