<div [formGroup]="myFormGroup">
  <section class="contentsButton">
    <div class="contentsButton__inner">
      <!--- 処理結果の表示 -->
      <app-parts-result-message [processCustomResult]="processCustomResult"></app-parts-result-message>
      
      <button
        (click)="panelOpenState=!panelOpenState;panelOpenState?panel.open():panel.close();"
        class="buttonPrimary">
        {{panelOpenState?ItemNameConst.BTN_INPUT_ITEM_HIDDEN:ItemNameConst.BTN_INPUT_ITEM_DISPLAY}}</button>
        
      <div class="contentsButton__subSection">
        <ng-container *ngIf="securityHideShow">
          <ng-container *ngIf="userInfoService.isFunctionAvailable(FunctionType.MasterImport)">
            <button class="buttonImport infotip"
              (click)="buttonAction(BUTTON_ACTION.IMPORT)">
              <span [innerHtml]="ButtonTipsConst.CSV_IMPORT | safeHtml_pipe" class="infotip__frame"></span>
            </button>
          </ng-container>
          <ng-container *ngIf="userInfoService.isFunctionAvailable(FunctionType.MasterExport)">
            <button class="buttonExport infotip"
              (click)="buttonAction(BUTTON_ACTION.EXPORT)">
              <span [innerHtml]="ButtonTipsConst.CSV_EXPORT | safeHtml_pipe" class="infotip__frame"></span>
            </button>
          </ng-container>
        </ng-container>
      </div>
        
    </div>
  </section>

  <section class="pageContainer">
    <!-- 入力フォーム -->
    <mat-expansion-panel
      #panel
      [hideToggle]="true">
      <ng-template matExpansionPanelContent>
        <section [ngClass]="!panelOpenState ? 'contents--hidden' : 'contents--visible'">
          <div class="contents__container--flex">
            <div class="contents__item--w-30">
              <dl class="definitionForm">
                <dt class="definitionForm__title w--35">科目コード<span
                    class="must_have_icon">{{ItemNameConst.LBL_REQUIRED}}</span></dt>
                <dd class="definitionForm__data">
                  <input
                    formControlName="accountCodeCtrl"
                    name="accountCodeCtrl"
                    (keyup.enter)="setAccountCode($event.type)"
                    (blur)="setAccountCode($event.type)"
                    maxlength="{{userInfoService.ApplicationControl?.accountTitleCodeLength}}"
                    type="tel"
                    class="input-size--150 input-uppercase">
                </dd>
                <dt class="definitionForm__title w--35">相手科目コード</dt>
                <dd class="definitionForm__data">
                  <input
                    formControlName="contraAccountCodeCtrl"
                    name="contraAccountCodeCtrl"
                    (keyup.enter)="setContraAccountCode($event.type)"
                    (blur)="setContraAccountCode($event.type)"
                    maxlength="10"
                    type="tel"
                    class="input-size--150 input-uppercase">
                </dd>
                <dt class="definitionForm__title w--35">相手科目補助コード</dt>
                <dd class="definitionForm__data">
                  <input
                    formControlName="contraAccountSubCodeCtrl"
                    name="contraAccountSubCodeCtrl"
                    (keyup.enter)="setContraAccountSubCode($event.type)"
                    (blur)="setContraAccountSubCode($event.type)"
                    maxlength="10"
                    type="tel"
                    class="input-size--150 input-uppercase">
                </dd>
              </dl>
            </div>
            <div class="contents__item--w-70">
              <dl class="definitionForm">
                <dt class="definitionForm__title w--11">科目名<span
                    class="must_have_icon">{{ItemNameConst.LBL_REQUIRED}}</span></dt>
                <dd class="definitionForm__data w--89">
                  <input
                    formControlName="accountNameCtrl"
                    name="accountNameCtrl"
                    (keyup.enter)="setAccountName($event.type)"
                    maxlength="40"
                    class="input-size--400">
                </dd>
                <dt class="definitionForm__title w--11">相手科目名</dt>
                <dd class="definitionForm__data w--89">
                  <input
                    formControlName="contraAccountNameCtrl"
                    name="contraAccountNameCtrl"
                    maxlength="40"
                    (keyup.enter)="setContraAccountName($event.type)"
                    class="input-size--400">
                </dd>
              </dl>
            </div>
            <div class="contents__buttonGroup">
              <button
                (click)="buttonAction(BUTTON_ACTION.REGISTRY)"
                [ngClass]="{'button-disable': myFormGroup.invalid}"
                class="buttonSecondary">
                {{ComponentStatus==COMPONENT_STATUS_TYPE.CREATE?ItemNameConst.BTN_REGISTRY:ItemNameConst.BTN_UPDATE}}</button>
              <button
                (click)="buttonAction(BUTTON_ACTION.DELETE)"
                [ngClass]="{'button-disable': DeleteButtonDisableFlag}"
                class="buttonMinimum">{{ItemNameConst.BTN_DELETE}}</button>
              <button
                (click)="clear();processResultService.clearProcessCustomMsg(processCustomResult)"
                class="buttonMinimum">{{ItemNameConst.BTN_CLEAR}}</button>
            </div>
          </div>
        </section>
      </ng-template>
    </mat-expansion-panel>

    <!-- 登録済みの科目 -->
    <section class="contents">
      <h2 class="contents__title--underline-slim">{{ItemNameConst.LBL_REGISTER_ACCOUNT_TITLE}}</h2>
      <div class="contents__container">
      <div class="common-inner-table">
        <table>
          <thead>
            <tr>
              <th class="{{TableColumn.COL_50_CODE}}">編集</th>
              <th class="{{TableColumn.COL_150_CODE}}">科目コード</th>
              <th class="{{TableColumn.COL_300_CODE}}">科目名</th>
              <th class="{{TableColumn.COL_200_CODE}}">相手科目コード</th>
              <th class="{{TableColumn.COL_300_CODE}}">相手科目名</th>
              <th class="{{TableColumn.COL_200_CODE}}">相手科目補助コード</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let account of accountTitlesResult?.accountTitles; let i = index"
              class="line-selector">
              <td class="{{TableColumn.COL_50_CENTER_NAME}}">
                  <a class="buttonEdit" (click)="selectLine(i)"></a>
              </td>
              <td class="{{TableColumn.COL_150_CENTER_NAME}}">{{account.code}}</td>
              <td class="{{TableColumn.COL_300_NAME}}">{{account.name}}</td>
              <td class="{{TableColumn.COL_200_CENTER_NAME}}">{{account.contraAccountCode}}</td>
              <td class="{{TableColumn.COL_300_NAME}}">{{account.contraAccountName}}</td>
              <td class="{{TableColumn.COL_200_CENTER_NAME}}">{{account.contraAccountSubCode}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      </div>
    </section>


  </section>

</div>